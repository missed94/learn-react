(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[1],{10:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return c}));var a=n(89),r=a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"api-key":"201d1bd9-901a-4727-afb5-9d1c77d38b75"}}),o={getUsers:function(e,t){return r.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))}},i={getFollow:function(e){return r.post("follow/".concat(e)).then((function(e){return e.data}))},getUnfollow:function(e){return r.delete("follow/".concat(e)).then((function(e){return e.data}))}},s={getProfile:function(e){return r.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return r.get("profile/status/".concat(e)).then((function(e){return e.data}))},updateStatus:function(e){return r.put("profile/status/",{status:e}).then((function(e){return e.data}))}},c={me:function(){return r.get("auth/me").then((function(e){return e.data}))},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},logout:function(){return r.delete("auth/login").then((function(e){return e.data}))}}},140:function(e,t,n){e.exports=n(235)},146:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){},15:function(e,t,n){e.exports={paginationComponent:"Pagination_paginationComponent__1mjIe",pagination:"Pagination_pagination__19QCN",pagination__list:"Pagination_pagination__list__2nnpm",pagination__link:"Pagination_pagination__link__3SKco",pagination__link_active:"Pagination_pagination__link_active__2ikgH"}},150:function(e,t,n){},151:function(e,t,n){},235:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(41),i=n.n(o),s=(n(145),n(146),n(147),n(42)),c=n(43),u=n(44),l=n(45),m=n(4),p=n(7),f=(n(148),n(149),function(){return r.a.createElement("div",{className:"newsComponent"},"News")}),g=(n(150),function(){return r.a.createElement("div",{className:"musicComponent"},"Music")}),d=(n(151),function(){return r.a.createElement("div",null,"Settings")}),_=n(85),E=n.n(_),h=n(6),v=n.n(h),b=function(e){return r.a.createElement("nav",{className:v.a.navigationComponent},r.a.createElement("ul",{className:v.a.list},r.a.createElement("li",{className:v.a.item},r.a.createElement(p.b,{className:v.a.link,activeClassName:v.a.active,to:"/profile/"},"Profile")),r.a.createElement("li",{className:v.a.item},r.a.createElement(p.b,{className:v.a.link,activeClassName:v.a.active,to:"/dialogs"},"Messages")),r.a.createElement("li",{className:v.a.item},r.a.createElement(p.b,{className:v.a.link,activeClassName:v.a.active,to:"/users"},"Users")),r.a.createElement("li",{className:v.a.item},r.a.createElement(p.b,{className:v.a.link,activeClassName:v.a.active,to:"/news"},"News")),r.a.createElement("li",{className:v.a.item},r.a.createElement(p.b,{className:v.a.link,activeClassName:v.a.active,to:"/music"},"Music")),r.a.createElement("li",{className:v.a.item},r.a.createElement(p.b,{className:v.a.link,activeClassName:v.a.active,to:"/settings"},"Settings"))))},w=n(57),N=n.n(w),S=n(86),O=n.n(S),C=function(e){return r.a.createElement("li",{className:O.a.friendsItemComponent},r.a.createElement("a",{href:""},r.a.createElement("img",{src:"https://lumpics.ru/wp-content/uploads/2017/11/Programmyi-dlya-sozdaniya-avatarok.png",alt:""}),r.a.createElement("p",null,e.friendName)))},P=function(e){var t=e.state.map((function(e,t){return r.a.createElement(C,{key:t,id:e.id,friendName:e.name})}));return r.a.createElement("div",{className:N.a.friendsComponent},r.a.createElement("h3",null,"Friends"),r.a.createElement("ul",{className:N.a.friendsList},t))},y=function(e){return r.a.createElement("div",{className:E.a.sidebarComponent},r.a.createElement(b,null),r.a.createElement(P,{state:e.state.friends}))},I=n(16),j=n(63),k=n(9),U=n.n(k),T=function(e){var t=e.getFollow,n=e.getUnfollow,a=e.followingInProgress,o=e.user;Object(j.a)(e,["getFollow","getUnfollow","followingInProgress","user"]);return r.a.createElement("li",{className:U.a.userComponent},r.a.createElement("div",{className:U.a.wrapper},r.a.createElement("div",{className:U.a.avatar},r.a.createElement("div",{className:U.a.img_wrap},r.a.createElement(p.b,{to:"/profile/".concat(o.id)},r.a.createElement("img",{src:null!==o.photos.small?o.photos.small:"https://lumpics.ru/wp-content/uploads/2017/11/Programmyi-dlya-sozdaniya-avatarok.png",alt:"user"}))),o.followed?r.a.createElement("button",{disabled:a.some((function(e){return e===o.id})),className:U.a.button,onClick:function(){n(o.id)}}," unfollow "):r.a.createElement("button",{disabled:a.some((function(e){return e===o.id})),className:U.a.button,onClick:function(){t(o.id)}}," follow ")),r.a.createElement("div",{className:U.a.desc},r.a.createElement("div",{className:U.a.nameStatus},r.a.createElement("h4",{className:U.a.fullName},"Name: ",r.a.createElement("div",null," ".concat(o.name))),r.a.createElement("div",{className:U.a.status},"Status: ",r.a.createElement("div",{className:U.a.status__text}," ".concat(o.status)))),r.a.createElement("div",{className:U.a.location__wrap},r.a.createElement("div",{className:U.a.country},"Country:"),r.a.createElement("div",{className:U.a.city},"City:")))))},F=n(59),x=n.n(F),z=n(83),L=n(15),A=n.n(L),R=function(e){for(var t=e.totalItemsCount,n=e.pageSize,o=e.pageChanged,i=e.currentPage,s=e.portionSize,c=void 0===s?10:s,u=Math.ceil(t/n),l=[],m=1;m<=u;m++)l.push(m);var p=Math.ceil(u/c),f=Object(a.useState)(1),g=Object(z.a)(f,2),d=g[0],_=g[1],E=(d-1)*c+1,h=d*c;return r.a.createElement("div",{className:A.a.paginationComponent},r.a.createElement("div",{className:A.a.pagination},d>1&&r.a.createElement("button",{className:"".concat(A.a.button," ").concat(A.a.prev__button),onClick:function(){_(d-1)}},"PREV"),r.a.createElement("ul",{className:A.a.pagination__list},l.filter((function(e){return e>=E&&e<=h})).map((function(e){return r.a.createElement("li",{className:A.a.pagination__item},r.a.createElement("a",{onClick:function(){o(e)},className:i===e?A.a.pagination__link_active:A.a.pagination__link},e))}))),d<p&&r.a.createElement("button",{className:"".concat(A.a.button," ").concat(A.a.next__button),onClick:function(){_(d+1)}},"NEXT")))},D=function(e){var t=e.users.map((function(t,n){return r.a.createElement(T,{key:t.id,user:t,getFollow:e.getFollow,getUnfollow:e.getUnfollow,toggleFollowingInProgress:e.toggleFollowingInProgress,followingInProgress:e.followingInProgress})}));return r.a.createElement("div",{className:x.a.usersComponent},r.a.createElement(R,{totalItemsCount:e.totalItemsCount,pageSize:e.pageSize,pageChanged:e.pageChanged,currentPage:e.currentPage,portionSize:e.portionSize}),r.a.createElement("ul",{className:x.a.users__list},t))},G=n(24),M=n(3),H=n.n(M),W=n(8),V=n(26),X=n(5),q=n(10),Z=function(e,t,n,a){return e.map((function(e){return e[t]===n?Object(X.a)({},e,{},a):e}))},B={users:[],portionSize:10,pageSize:30,totalItemsCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},J=function(e){return{type:"FOLLOW",userId:e}},Q=function(e){return{type:"UNFOLLOW",userId:e}},K=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},Y=function(e,t){return{type:"FOLLOWING_IN_PROGRESS",isFetching:e,userId:t}},$=function(){var e=Object(W.a)(H.a.mark((function e(t,n,a,r){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Y(!0,n)),e.next=3,a(n);case 3:0===e.sent.resultCode&&t(r(n)),t(Y(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(X.a)({},e,{users:Z(e.users,"id",t.userId,{followed:!0})});case"UNFOLLOW":return Object(X.a)({},e,{users:Z(e.users,"id",t.userId,{followed:!1})});case"SET_USERS":return Object(X.a)({},e,{users:t.users});case"SET_CURRENT_PAGE":return Object(X.a)({},e,{currentPage:t.pageNumber});case"SET_TOTAL_USERS_COUNT":return Object(X.a)({},e,{totalItemsCount:t.totalItemsCount});case"TOGGLE_IS_FETCHING":return Object(X.a)({},e,{isFetching:t.isFetching});case"FOLLOWING_IN_PROGRESS":return Object(X.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(V.a)(e.followingInProgress),[t.userId]):[e.followingInProgress.filter((function(e){return e!==t.userId}))]});default:return e}},te=(n(174),function(e){return e.usersPage.users}),ne=function(e){return e.usersPage.pageSize},ae=function(e){return e.usersPage.totalItemsCount},re=function(e){return e.usersPage.currentPage},oe=function(e){return e.usersPage.isFetching},ie=function(e){return e.usersPage.followingInProgress},se=function(e){return e.usersPage.portionSize},ce=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).pageChanged=function(t){var n=e.props.pageSize;e.props.requestUsers(t,n)},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentPage,n=e.pageSize;this.props.requestUsers(t,n)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.isFetching?r.a.createElement(G.a,null):null,r.a.createElement(D,{totalItemsCount:this.props.totalItemsCount,pageSize:this.props.pageSize,users:this.props.users,currentPage:this.props.currentPage,pageChanged:this.pageChanged,getUnfollow:this.props.getUnfollow,toggleFollowingInProgress:this.props.toggleFollowingInProgress,followingInProgress:this.props.followingInProgress,getFollow:this.props.getFollow,portionSize:this.props.portionSize}))}}]),n}(r.a.Component),ue=Object(I.b)((function(e){return{users:te(e),pageSize:ne(e),totalItemsCount:ae(e),currentPage:re(e),isFetching:oe(e),followingInProgress:ie(e),portionSize:se(e)}}),{toggleFollowingInProgress:Y,requestUsers:function(e,t){return function(){var n=Object(W.a)(H.a.mark((function n(a){var r;return H.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(K(!0)),a({type:"SET_CURRENT_PAGE",pageNumber:e}),n.next=4,q.d.getUsers(e,t);case 4:r=n.sent,a({type:"SET_USERS",users:r.items}),a({type:"SET_TOTAL_USERS_COUNT",totalItemsCount:r.totalCount}),a(K(!1));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},getFollow:function(e){return function(){var t=Object(W.a)(H.a.mark((function t(n){return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:$(n,e,q.a.getFollow.bind(q.a),J);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUnfollow:function(e){return function(){var t=Object(W.a)(H.a.mark((function t(n){return H.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:$(n,e,q.a.getUnfollow.bind(q.a),Q);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(ce),le=n(32),me=n.n(le),pe=function(e){return r.a.createElement("header",{className:me.a.headerComponent},r.a.createElement("img",{src:"https://image.similarpng.com/very-thumbnail/2020/07/Whatsapp-logo-design-on-transparent-background-PNG.png"}),r.a.createElement("div",{className:me.a.login__container},e.isAuth?r.a.createElement("div",null,r.a.createElement("img",{className:me.a.photo,src:"https://lumpics.ru/wp-content/uploads/2017/11/Programmyi-dlya-sozdaniya-avatarok.png",alt:""}),r.a.createElement("span",null,e.loginName),r.a.createElement("button",{onClick:e.logout},"logout")):r.a.createElement(p.b,{className:me.a.login__link,to:"/login"}," Login")))},fe=n(25),ge=n(34),de=Object(I.b)((function(e){return{isAuth:e.auth.isAuth,loginName:e.auth.login,currentId:e.auth.id}}),{logout:fe.d,getProfile:ge.c})(pe),_e=n(18),Ee={initialized:!1},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INITIALIZED":return Object(X.a)({},e,{initialized:!0});default:return e}},ve=n(77),be={friends:[{id:1,name:"Danil"},{id:2,name:"Artem"},{id:3,name:"Dima"},{id:4,name:"Igor"}]},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be;return e},Ne=n(90),Se=n(84),Oe=Object(_e.c)({profilePage:ge.b,dialogsPage:ve.a,sidebar:we,usersPage:ee,auth:fe.a,form:Se.a,app:he}),Ce=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||_e.d,Pe=Object(_e.e)(Oe,Ce(Object(_e.a)(Ne.a))),ye=function(e){return function(t){return r.a.createElement(a.Suspense,{fallback:r.a.createElement(G.a,null)},r.a.createElement(e,t))}},Ie=r.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,311))})),je=r.a.lazy((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,310))})),ke=r.a.lazy((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,312))})),Ue=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?r.a.createElement("div",{className:"app-wrapper"},r.a.createElement("div",{className:"app-container"},r.a.createElement(de,null),r.a.createElement(y,{state:this.props.state.sidebar}),r.a.createElement("div",{className:"app-wrapper-content"},r.a.createElement(m.b,{path:"/login",render:ye(ke)}),r.a.createElement(m.b,{path:"/dialogs",render:ye(Ie)}),r.a.createElement(m.b,{path:"/profile/:userId?",render:ye(je)}),r.a.createElement(m.b,{path:"/Users",render:function(){return r.a.createElement(ue,null)}}),r.a.createElement(m.b,{path:"/news",render:function(){return r.a.createElement(f,null)}}),r.a.createElement(m.b,{path:"/music",render:function(){return r.a.createElement(g,null)}}),r.a.createElement(m.b,{path:"/settings",render:function(){return r.a.createElement(d,null)}})))):r.a.createElement(G.a,null)}}]),n}(r.a.Component),Te=Object(_e.d)(Object(I.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(){var e=Object(W.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(Object(fe.b)());case 2:t({type:"SET_INITIALIZED"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),m.f)(Ue),Fe=function(e){return r.a.createElement(p.a,null,r.a.createElement(I.a,{store:Pe},r.a.createElement(Te,{state:Pe.getState()})))};i.a.render(r.a.createElement(Fe,null),document.getElementById("root"))},24:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(60),i=n.n(o),s=n(88),c=n.n(s);t.a=function(e){return r.a.createElement("div",{className:i.a.preloaderComponent},r.a.createElement("img",{className:i.a.preloaderImg,src:c.a}))}},25:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return f}));var a=n(3),r=n.n(a),o=n(8),i=n(5),s=n(10),c=n(47),u={userId:null,email:null,login:null,isFetching:!1,isAuth:!1},l=function(e,t,n,a){return{type:"SET_USER_DATA",data:{userId:e,email:t,login:n,isAuth:a}}},m=function(){return function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a,o,i,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.me();case 2:0===(n=e.sent).resultCode&&(a=n.data,o=a.id,i=a.email,c=a.login,t(l(o,i,c,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=function(e,t,n){return function(){var a=Object(o.a)(r.a.mark((function a(o){var i,u;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.b.login(e,t,n);case 2:0===(i=a.sent).resultCode?o(m()):(u=i.messages.length>0?i.messages[0]:"Some error",o(Object(c.a)("login",{_error:u})));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},f=function(){return function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.b.logout();case 2:0===e.sent.resultCode&&t(l(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(i.a)({},e,{},t.data);default:return e}}},32:function(e,t,n){e.exports={headerComponent:"Header_headerComponent__1Dr3W",login__link:"Header_login__link__LRHtA",photo:"Header_photo__3somd"}},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return g})),n.d(t,"f",(function(){return d}));var a=n(3),r=n.n(a),o=n(8),i=n(26),s=n(5),c=n(10),u={myPosts:[{id:1,message:"Hi, how are you!",likes:"30"},{id:2,message:"it's my first post",likes:"20"}],profile:null,status:""},l=function(e){return{type:"ADD-POST",newPost:e}},m=function(e){return{type:"SET_USER_STATUS",status:e}},p=function(e){return{type:"DELETE_POST",postId:e}},f=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.c.getProfile(e);case 2:a=t.sent,n({type:"SET_USER_PROFILE",profile:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.c.getStatus(e);case 2:a=t.sent,n(m(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.c.updateStatus(e);case 2:0===t.sent.resultCode&&n(m(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var n={id:5,message:t.newPost,likes:0};return Object(s.a)({},e,{myPosts:[n].concat(Object(i.a)(e.myPosts))});case"DELETE_POST":return Object(s.a)({},e,{myPosts:e.myPosts.filter((function(e){return e.id!==t.postId}))});case"SET_USER_PROFILE":return Object(s.a)({},e,{profile:t.profile});case"SET_USER_STATUS":return Object(s.a)({},e,{status:t.status});default:return e}}},57:function(e,t,n){e.exports={friendsComponent:"Friends_friendsComponent__2AXFG",friendsList:"Friends_friendsList__Vnsk6"}},59:function(e,t,n){e.exports={usersComponent:"Users_usersComponent__2txS4"}},6:function(e,t,n){e.exports={navigationComponent:"Navigation_navigationComponent__2THYA",item:"Navigation_item__3FC-u",active:"Navigation_active__3l7vu"}},60:function(e,t,n){e.exports={preloaderComponent:"Preloader_preloaderComponent__3FZ8B",preloaderImg:"Preloader_preloaderImg__2MWNV"}},77:function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var a=n(26),r=n(5),o={dialogs:[{id:1,name:"Andrey"},{id:2,name:"Oleg"},{id:3,name:"Oxana"},{id:4,name:"Lisa"}],messages:[{id:1,message:"Hello"},{id:2,message:"How are you"},{id:3,message:"What is your health"}]},i=function(e){return{type:"SEND-MESSAGE",message:e}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":return Object(r.a)({},e,{messages:[].concat(Object(a.a)(e.messages),[{id:6,message:t.message}])});default:return e}}},85:function(e,t,n){e.exports={sidebarComponent:"Sidebar_sidebarComponent__39V5q"}},86:function(e,t,n){e.exports={friendsItemComponent:"FriendsItem_friendsItemComponent__1ux9u"}},88:function(e,t,n){e.exports=n.p+"static/media/preloader.33334fbe.gif"},9:function(e,t,n){e.exports={userComponent:"User_userComponent__2h-jU",wrapper:"User_wrapper__1-5VF",avatar:"User_avatar__JR9Bl",button:"User_button__v9DX6",img_wrap:"User_img_wrap__Q63_x",desc:"User_desc__3tDgY",fullName:"User_fullName__1dfpZ",country:"User_country__1QKEg",location__wrap:"User_location__wrap__1vRit"}}},[[140,2,3]]]);
//# sourceMappingURL=main.53922eed.chunk.js.map